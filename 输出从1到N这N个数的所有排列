//create by bqy1999 17/11/12
//produce all the permutations of the set A3.

#include<iostream>
using namespace std;

int index=0;
int needindex[10]={0};//emmmmm这个鬼东西可把我害惨了，没有指定大小的数组居然不是随机的！
int count=0;

void have_permutation(int cur,int length,int * A,int * B,int *needindex,int alltime);

int main()
{
    int length = 0;
    cin >> length;
    int *A = (int*)malloc(sizeof(int) * length);
    int *B = (int*)malloc(sizeof(int) * length);

    int time=0;
    cin>>time;

    int alltime=1;
    for(int i=1;i<=length;++i){
        alltime*=i;
    }

    for (int i = 0; i < length; ++i) {
        A[i] = 1;
    }

    for(int i=0;i<time;++i){
        cin>>needindex[i];
    }
    have_permutation(0,length, A, B,needindex,alltime);
    //cout<<needindex[0]<<endl;
    return 0;

}

void have_permutation(int cur,int length, int * A, int * B,int *needindex,int alltime)
{
    if (cur >= length) {
        index++;
        if(needindex[count]==index){
            cout<<'{'<<B[0];
            for (int i = 1; i < length-1; ++i) {
                cout <<','<<B[i];
            }
            cout<<','<<B[length-1]<<'}'<<endl;
            //cout<<needindex[count]<<endl;
            count++;
        }
        //count++;
        //cout<<"count:"<<count<<endl;
        //cout<<"index:"<<index<<endl<<endl;
        //isGo=1;
    }
    else {
        for (int i = 0; i < length; ++i) {
            if (A[i] == 1){
                B[cur] = i + 1;
                A[i] = 0;
                have_permutation(cur + 1, length, A, B,needindex,alltime);
                A[i] = 1;
            }
        }
    }
}
